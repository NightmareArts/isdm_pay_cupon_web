{% load static %}
<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Iniciar sesi√≥n ¬∑ ISDM Pay</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/auth.css' %}" rel="stylesheet">
</head>

<body>
    <div class="auth-bg">
        <div class="auth-card">
            <!-- Encabezado -->
            <div class="brand-mini">
                <img src="{% static 'img/isdm-logo.png' %}" alt="Instituto Superior Del Milagro">
            </div>
            <div class="auth-title">Instituto Superior<br>Del Milagro</div>
            <div class="auth-sub">NIVEL SUPERIOR TERCIARIO ‚Ä¢ N¬∞ 8207</div>

            <!-- Mensajes -->
            {% if messages %}
            <div class="mt-3">
                {% for m in messages %}
                <div class="alert alert-{{ m.tags|default:'info' }} py-2 mb-2">{{ m }}</div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Form -->
            <form method="post" class="mt-3" novalidate>
                {% csrf_token %}

                <div class="mb-3">
                    <label class="form-label">Correo electr√≥nico o usuario</label>
                    {{ form.username }}
                    {% if form.username.errors %}
                    <div class="text-error small mt-1">{{ form.username.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="mb-1 input-wrap">
                    <label class="form-label">Contrase√±a</label>
                    {{ form.password }}
                    <button type="button" class="eye-btn" aria-label="Mostrar contrase√±a" onclick="togglePass()">
                        <svg width="22" height="22" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7Zm0 12a5 5 0 1 1 .001-10.001A5 5 0 0 1 12 17Z" />
                        </svg>
                    </button>
                    {% if form.password.errors %}
                    <div class="text-error small mt-1">{{ form.password.errors.0 }}</div>
                    {% endif %}
                </div>

                {% if form.non_field_errors %}
                <div class="alert alert-danger py-2 mt-2">{{ form.non_field_errors.0 }}</div>
                {% endif %}

                <div class="inline-help mt-2 mb-3">
                    <a href="{% url 'password_reset' %}">¬øOlvid√≥ su contrase√±a?</a>
                </div>

                {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}

                <button class="btn btn-primary w-100">Acceder</button>

                <div class="divider-text mt-3">¬øNo tienes cuenta?</div>

                <a class="btn btn-outline-red w-100" href="{% url 'signup' %}">Registrarse</a>

                <div class="cookie-note">üç™ Aviso de Cookies</div>
            </form>
        </div>
    </div>

    <script>
        function togglePass() {
            const pass = document.getElementById("id_password");
            if (!pass) return;
            pass.type = (pass.type === "password") ? "text" : "password";
        }
    </script>
</body>

</html>